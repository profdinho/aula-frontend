<!doctype html>
<html lang="pt-br">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

        <title>Formulário com JavaScript</title>
    </head>
    <body>
        <div class="container g-2">
            <div class="row g-2">
                <div class="col-12">
                    <h1>Formulário</h1>
                </div>
            </div>
            <form name="formulario" id="formulario">
                <fieldset name="dados_pessoais">
                    <legend>Dados pessoais</legend>
                    <div class="row g-2">
                        <div class="col-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="nome" name="nome" placeholder="Nome" required>
                                <label for="nome">Nome</label>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="email" name="email" placeholder="E-mail">
                                <label for="email">E-mail</label>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset name="aparelhos">
                    <legend>Assinale abaixo os aparelhos que você possui em sua casa</legend>
                    <div class="row g-2">
                        <div class="col-3">
                            <div class="form-check">
                                <input type="checkbox" id="parabolica" class="form-check-input" name="aparelhos[]"
                                    value="Antena parabólica/cabo">
                                <label for="parabolica" class="form-check-label">Antena parabólica/cabo</label>
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="form-check">
                                <input type="checkbox" id="microondas" class="form-check-input" name="aparelhos[]"
                                    value="Microondas">
                                <label for="parabolica" class="form-check-label">Microondas</label>
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="form-check">
                                <input type="checkbox" id="ar_condicionado" class="form-check-input" name="aparelhos[]"
                                    value="Ar condicionado">
                                <label for="parabolica" class="form-check-label">Ar condicionado</label>
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="form-check">
                                <input type="checkbox" id="maquina_lavar_roupas" class="form-check-input" name="aparelhos[]"
                                    value="Máquina de lavar roupas">
                                <label for="parabolica" class="form-check-label">Máquina de lavar roupas</label>
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="form-check">
                                <input type="checkbox" id="freezer" class="form-check-input" name="aparelhos[]"
                                    value="Freezer">
                                <label for="parabolica" class="form-check-label">Freezer</label>
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="form-check">
                                <input type="checkbox" id="computador" class="form-check-input" name="aparelhos[]"
                                    value="Computador/Notebook">
                                <label for="parabolica" class="form-check-label">Computador/Notebook</label>
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="form-check">
                                <input type="checkbox" id="Televisor" class="form-check-input" name="aparelhos[]"
                                    value="Televisor">
                                <label for="parabolica" class="form-check-label">Televisor</label>
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="form-check">
                                <input type="checkbox" id="Aquecedor" class="form-check-input" name="aparelhos[]"
                                    value="Aquecedor">
                                <label for="parabolica" class="form-check-label">Aquecedor</label>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <div class="row">
                    <div class="col-12">
                        <button type="button" class="btn btn-primary" id="enviar" name="enviar">
                            Enviar
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div id="objeto"></div>
                    </div>
                </div>
            </form>
        </div>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <script>
            $(document).ready(function(){
                $("#enviar").click(function(){
                    verificaChecks();
                })
            });
            
            function verificaChecks() {
                var contato = {
                    "nome" : "",
                    "email" : "",
                    "aparelhos" : null
                };
                var aparelhos = new Array();
                var qtdeChecked = 0;
                var nome = $("#nome").val();
                var email = $("#email").val();
                $("input[name='aparelhos[]'").each(function ( index, element ){
                    if ( element.checked ) {
                        console.log(element.value);
                        aparelhos.push(element.value);
                        qtdeChecked++;
                    }
                });
                /*
                var nome = form.elements["nome"].value;
                var email = form.email.value;
                var campos = form.elements["aparelhos[]"];
                var tamanho = campos.length;                
                for(var i = 0; i < tamanho; i++){
                    if(campos[i].checked){
                        console.log(campos[i].value);
                        aparelhos.push(campos[i].value);
                        qtdeChecked++;
                    }
                }
                */
                if (qtdeChecked < 3){
                    alert("Precisa selecionar no mínimo 3 itens");
                }
                contato.nome = nome;
                contato.email = email;
                contato.aparelhos = aparelhos;

                document.getElementById("objeto").innerHTML = "Nome: " + contato.nome + "<br>";
                document.getElementById("objeto").innerHTML += "Email: " + contato.email + "<br>";
                document.getElementById("objeto").innerHTML += "Aparelhos selecionados: " + contato.aparelhos;
            }
            
        </script>
    </body>
</html>